{%- set sentinel = pillar['sentinel'] -%}
{%- set instances = sentinel['instances'] -%}
# Network configuration
bind {{ sentinel['bindAddress'] }}
port {{ sentinel['bindPort'] }}
protected-mode {{ 'yes' if sentinel['protectedMode'] == True else 'no' }}

# Process-related configuration
daemonize {{ 'yes' if sentinel['daemonize'] == True else 'no' }}

# LOG file and PID file location
pidfile {{ sentinel['pidFile'] }}
logfile {{ sentinel['logFile'] }}

# Redis-sentinel directory
dir {{ sentinel['dir'] }}

# Sentinel instances
{%- for instance in instances %}
{%- set name = instance["name"] %}
sentinel monitor {{ name }} {{ instance['masterHost'] }} {{ instance['masterPort'] }} {{ instance['quorum'] }}
sentinel down-after-milliseconds {{ name }} {{ instance['downAfterMs'] }}
sentinel failover-timeout {{ name }} {{ instance['failoverTimeout'] }}
sentinel parallel-syncs {{ name }} {{ instance['parallelSyncs'] }}
sentinel auth-pass {{ name }} {{ instance['authPassword'] }}
{% endfor %}